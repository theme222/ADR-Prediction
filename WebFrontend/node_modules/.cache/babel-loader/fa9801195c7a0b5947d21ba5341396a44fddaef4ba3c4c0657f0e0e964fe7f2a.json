{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { reactive } from 'vue';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { useRouter, useRoute } from 'vue-router';\nimport { getAccountInfo } from '@/scripts/AccountFunc';\nexport default {\n  __name: 'UploadView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const router = useRouter();\n    const route = useRoute();\n    const fileName = ref(null);\n    const fileSize = ref(\"0 Kb\");\n    const accountName = ref(null);\n    const labelValue = ref('');\n    function changeFileInfo(event) {\n      fileName.value = event.target.files[0].name;\n      fileSize.value = formatFileSize(event.target.files[0].size);\n    }\n    const formatFileSize = bytes => {\n      const units = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n      let index = 0;\n      while (bytes >= 1024 && index < 4) {\n        bytes /= 1024;\n        index++;\n      }\n      return `${bytes.toFixed(0)} ${units[index]}`;\n    };\n    function uploadFile() {\n      const formData = new FormData();\n      let filenameToSet = Date.now();\n      if (accountName.value !== \"\") {\n        filenameToSet = accountName.value;\n      }\n      formData.append('file', document.getElementById('file').files[0]);\n      axios.post(\"http://localhost:7000/api/uploadFile\", formData, {\n        headers: {\n          \"Content-Type\": 'multipart/form-data',\n          'Authorization': `Bearer ${Cookies.get('session_cookie')}`\n        }\n      }).then(response => {\n        alert(response.data);\n        router.push({\n          name: 'dashboard'\n        });\n      }).catch(error => {\n        alert(error.data);\n        console.error('Error uploading file  :', error);\n      });\n    }\n    getAccountInfo().then(name => {\n      accountName.value = name;\n    });\n    const __returned__ = {\n      router,\n      route,\n      fileName,\n      fileSize,\n      accountName,\n      labelValue,\n      changeFileInfo,\n      formatFileSize,\n      uploadFile,\n      ref,\n      reactive,\n      get axios() {\n        return axios;\n      },\n      get Cookies() {\n        return Cookies;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get getAccountInfo() {\n        return getAccountInfo;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","axios","Cookies","useRouter","useRoute","getAccountInfo","router","route","fileName","fileSize","accountName","labelValue","changeFileInfo","event","value","target","files","name","formatFileSize","size","bytes","units","index","toFixed","uploadFile","formData","FormData","filenameToSet","Date","now","append","document","getElementById","post","headers","get","then","response","alert","data","push","catch","error","console"],"sources":["/home/sirat/Code/vuempaproject/src/views/UploadView.vue"],"sourcesContent":["<script setup>\n/* eslint-disable */\nimport { ref } from 'vue'\nimport { reactive } from 'vue'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport { useRouter, useRoute } from 'vue-router'\nimport { getAccountInfo } from '@/scripts/AccountFunc'\n\nconst router = useRouter()\nconst route = useRoute()\n\nconst fileName = ref(null)\nconst fileSize = ref(\"0 Kb\")\nconst accountName = ref(null)\nconst labelValue = ref('')\n\nfunction changeFileInfo(event){\n  fileName.value = event.target.files[0].name\n  fileSize.value = formatFileSize(event.target.files[0].size)\n}\n\nconst formatFileSize = (bytes) => {\n  const units = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  let index = 0;\n  while (bytes >= 1024 && index < 4) {\n    bytes /= 1024;\n    index++;\n  }\n  return `${bytes.toFixed(0)} ${units[index]}`\n};\n\n\nfunction uploadFile(){\n    const formData = new FormData()\n    let filenameToSet  = Date.now()\n    if (accountName.value !== \"\") {filenameToSet = accountName.value}\n    formData.append('file', document.getElementById('file').files[0])\n    axios.post(\"http://localhost:7000/api/uploadFile\", \n              formData, \n              {headers: {\"Content-Type\" : 'multipart/form-data', \n                        'Authorization': `Bearer ${Cookies.get('session_cookie')}`} })\n    .then(response => {\n      alert(response.data)\n      router.push({name:'dashboard'})\n    })\n    .catch(error => {\n      alert(error.data)\n      console.error('Error uploading file  :', error);\n    });\n  }\n\n\ngetAccountInfo().then(name => {accountName.value = name})\n</script>\n\n<template>\n\n  <div class=\"background\"></div>\n\n  <div class=\"titleWrapper\">\n      \n      <h1 class=\"titleText\">\n          <RouterLink to=\"home\"> ADR Prediction</RouterLink>\n      </h1>\n      \n      <label class=\"accountName\">{{accountName || \"No account\"}}</label>\n\n      \n  </div>\n  \n  <div class=\"headingWrapper\">\n      <h2 class=\"heading\">\n        Upload your DNA file (.FastQ)\n      </h2>\n  </div>\n  \n  <div class=\"uploadButtonWrapper\">\n    <div style=\"position: absolute; font-family: Arial, Helvetica, sans-serif; font-size: 1.5em; top: 8%; left: 50%; transform:translate(-50%,-50%)\">Select <i>FastQ</i> file to upload:</div> \n    <input type=\"file\" name=\"file\" id=\"file\" class=\"inputUploadfile\" accept=\".txt, .fq, .FastQ, .fastq\" @change=\"changeFileInfo\"/>\n    <label for=\"file\"><div style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);\">CLICK TO UPLOAD</div></label>\n    <div class=\"uploadFilenameDisplay\">File selected : {{fileName || \"None\"}} Size : {{fileSize}}</div>\n    <input type=\"text\" id=\"name\" class=\"box\" v-model=\"labelValue\" style=\"position: absolute; top: 75%; left: 50%; transform: translate(-50%,-50%);\" v-if=\"true\" placeholder=\"Input sequece name / identifier\">\n    <div><button class=\"uploadSubmitButton\" @click=\"uploadFile\">Submit</button></div>\n  </div>\n  \n</template>\n\n<style>\n\n\na:link {\n  color: white;\n  text-decoration: none;\n}\n\na:visited {\n  color: white;\n  text-decoration: none;\n}\n\na:hover {\n  color: white;\n}\n\na:active {\n  color: white;\n  text-decoration: none;\n}\n\n.background{\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  padding: 100%;\n  background-color: #EBEBEB;\n}\n\n.titleWrapper{\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    background: #FF6700 ;\n    width: 100%;\n    padding-top: 1%;\n    padding-bottom: 1%;\n}\n\n.titleText{\n    display: inline;\n    padding-left: 1%;\n    color: white;\n    font-weight: 800;\n}\n\n.accountName {\n  position: inherit;\n  font-family: Arial, Helvetica, sans-serif;\n  color: white;\n  font-size: 1.5em;\n  top: 2%;\n  left: 80%;\n}\n\n.headingWrapper{\n    position: absolute;\n    top: 10%;\n    left: 50%;\n}\n\n.heading{\n    transform: translate(-50%);\n    font-size: xx-large;\n}\n\n.uploadButtonWrapper{\n    position: absolute;\n    top: 16%;\n    left: 50%;\n    height: 40%;\n    width: 50%;\n    transform: translate(-50%);\n}\n\n.inputUploadfile {\n\twidth: 0.1px;\n\theight: 0.1px;\n\topacity: 0;\n\toverflow: hidden;\n\tposition: absolute;\n\tz-index: -1;\n}\n\n.inputUploadfile + label {\n    position: absolute;\n    left: 50%;\n    top: 40%;\n    width: 80%;\n    height: 50%;\n    transform: translate(-50%,-50%);\n    text-align: center;\n    font-size: 1.7em;\n    font-weight: 700;\n    color: #EBEBEB;\n    background-color: #6a66a3;\n    display: inline-block;\n    border-radius: 4px;\n    border-style: none;\n    \n}\n\n.inputUploadfile + label:hover{\n  cursor: pointer;\n}\n\n.uploadSubmitButton {\n  position: absolute;\n  top: 90%;\n  left: 50%;\n  transform: translate(-50%);\n  outline: none;\n  cursor: pointer;\n  font-weight: 600;\n  border-radius: 3px;\n  padding: 12px 24px;\n  border: 0;\n  color: #3a4149;\n  background: #FF6700;\n  line-height: 1.15;\n  font-size: 1em;\n\n}\n\n.uploadSubmitButton:hover {\n  transition: all .1s ease;\n  box-shadow: 0 0 0 0 #fff, 0 0 0 3px #1de9b6;\n}\n.uploadFilenameDisplay{\n    position: absolute;\n    left: 50%;\n    top: 82%;\n    transform: translate(-50%);\n    white-space: nowrap;\n}\n\n.uploadedFileViewer{\n    background-color: rgb(161, 61, 99);\n    color: #fff;\n    position: absolute;\n    padding: 2%;\n    border-radius: 4px;\n    border-style: none;\n    white-space: nowrap;\n    top: 15%;\n    left: 50%;\n    transform: translate(-50%);\n    font-size: 2em;\n}\n</style>"],"mappings":";AAEA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,QAAQ,QAAQ,KAAK;AAC9B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;AAChD,SAASC,cAAc,QAAQ,uBAAuB;;;;;;;;IANtD;IAQA,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;IAC1B,MAAMI,KAAK,GAAGH,QAAQ,CAAC,CAAC;IAExB,MAAMI,QAAQ,GAAGT,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMU,QAAQ,GAAGV,GAAG,CAAC,MAAM,CAAC;IAC5B,MAAMW,WAAW,GAAGX,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMY,UAAU,GAAGZ,GAAG,CAAC,EAAE,CAAC;IAE1B,SAASa,cAAcA,CAACC,KAAK,EAAC;MAC5BL,QAAQ,CAACM,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI;MAC3CR,QAAQ,CAACK,KAAK,GAAGI,cAAc,CAACL,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IAC7D;IAEA,MAAMD,cAAc,GAAIE,KAAK,IAAK;MAChC,MAAMC,KAAK,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;MAC/C,IAAIC,KAAK,GAAG,CAAC;MACb,OAAOF,KAAK,IAAI,IAAI,IAAIE,KAAK,GAAG,CAAC,EAAE;QACjCF,KAAK,IAAI,IAAI;QACbE,KAAK,EAAE;MACT;MACA,OAAQ,GAAEF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAE,IAAGF,KAAK,CAACC,KAAK,CAAE,EAAC;IAC9C,CAAC;IAGD,SAASE,UAAUA,CAAA,EAAE;MACjB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/B,IAAIC,aAAa,GAAIC,IAAI,CAACC,GAAG,CAAC,CAAC;MAC/B,IAAInB,WAAW,CAACI,KAAK,KAAK,EAAE,EAAE;QAACa,aAAa,GAAGjB,WAAW,CAACI,KAAK;MAAA;MAChEW,QAAQ,CAACK,MAAM,CAAC,MAAM,EAAEC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAAChB,KAAK,CAAC,CAAC,CAAC,CAAC;MACjEf,KAAK,CAACgC,IAAI,CAAC,sCAAsC,EACvCR,QAAQ,EACR;QAACS,OAAO,EAAE;UAAC,cAAc,EAAG,qBAAqB;UACvC,eAAe,EAAG,UAAShC,OAAO,CAACiC,GAAG,CAAC,gBAAgB,CAAE;QAAC;MAAE,CAAC,CAAC,CACjFC,IAAI,CAACC,QAAQ,IAAI;QAChBC,KAAK,CAACD,QAAQ,CAACE,IAAI,CAAC;QACpBjC,MAAM,CAACkC,IAAI,CAAC;UAACvB,IAAI,EAAC;QAAW,CAAC,CAAC;MACjC,CAAC,CAAC,CACDwB,KAAK,CAACC,KAAK,IAAI;QACdJ,KAAK,CAACI,KAAK,CAACH,IAAI,CAAC;QACjBI,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD,CAAC,CAAC;IACJ;IAGFrC,cAAc,CAAC,CAAC,CAAC+B,IAAI,CAACnB,IAAI,IAAI;MAACP,WAAW,CAACI,KAAK,GAAGG,IAAI;IAAA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}