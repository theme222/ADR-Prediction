{"ast":null,"code":"import { ref } from 'vue';\nimport { reactive } from 'vue';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nexport default {\n  __name: 'UploadView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    /* eslint-disable */\n    const fileName = ref(null);\n    const fileSize = ref(\"0 Kb\");\n    const accountName = ref(\"Loading...\");\n    const accountEmail = ref(null);\n    const accountId = ref(null);\n    function changeFileInfo(event) {\n      fileName.value = event.target.files[0].name;\n      fileSize.value = formatFileSize(event.target.files[0].size);\n    }\n    const formatFileSize = bytes => {\n      const units = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n      let index = 0;\n      while (bytes >= 1024 && index < 4) {\n        bytes /= 1024;\n        index++;\n      }\n      return `${bytes.toFixed(0)} ${units[index]}`;\n    };\n    function getAccountInfo() {\n      axios.post(\"http://localhost:7000/api/getAccountInfo\", {\n        session_cookie: Cookies.get('session_cookie')\n      }).then(response => {\n        if (response.data['name'] === null) {\n          window.location.href = \"signup.html\";\n        }\n        accountName.value = response.data['name'];\n      }).catch(error => {\n        console.error('Error getting info :', error);\n      });\n    }\n    function uploadFile() {\n      const formData = new FormData();\n      formData.append('file', document.getElementById('file').files[0]);\n      axios.post(\"http://localhost:7000/api/uploadFile\", formData, {\n        headers: {\n          \"Content-Type\": 'multipart/form-data',\n          'Authorization': `Bearer ${Cookies.get('session_cookie')}`\n        }\n      }).then(response => {\n        alert(response.data);\n      }).catch(error => {\n        console.error('Error getting info :', error);\n      });\n    }\n    function signOut() {\n      Cookies.remove('session_cookie');\n      window.location.href = \"login.html\";\n    }\n    getAccountInfo();\n    const __returned__ = {\n      fileName,\n      fileSize,\n      accountName,\n      accountEmail,\n      accountId,\n      changeFileInfo,\n      formatFileSize,\n      getAccountInfo,\n      uploadFile,\n      signOut,\n      ref,\n      reactive,\n      get axios() {\n        return axios;\n      },\n      get Cookies() {\n        return Cookies;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","axios","Cookies","fileName","fileSize","accountName","accountEmail","accountId","changeFileInfo","event","value","target","files","name","formatFileSize","size","bytes","units","index","toFixed","getAccountInfo","post","session_cookie","get","then","response","data","window","location","href","catch","error","console","uploadFile","formData","FormData","append","document","getElementById","headers","alert","signOut","remove"],"sources":["/home/sirat/Code/vuempaproject/src/views/UploadView.vue"],"sourcesContent":["<script setup>\n/* eslint-disable */\nimport { ref } from 'vue'\nimport { reactive } from 'vue'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\n\nconst fileName = ref(null)\nconst fileSize = ref(\"0 Kb\")\nconst accountName = ref(\"Loading...\")\nconst accountEmail = ref(null)\nconst accountId = ref(null)\n\nfunction changeFileInfo(event){\n  fileName.value = event.target.files[0].name\n  fileSize.value = formatFileSize(event.target.files[0].size)\n}\n\nconst formatFileSize = (bytes) => {\n  const units = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n  let index = 0;\n  while (bytes >= 1024 && index < 4) {\n    bytes /= 1024;\n    index++;\n  }\n  return `${bytes.toFixed(0)} ${units[index]}`\n};\n\nfunction getAccountInfo(){\n  axios.post(\"http://localhost:7000/api/getAccountInfo\",{session_cookie : Cookies.get('session_cookie')})\n    .then(response => {\n      if (response.data['name'] === null){\n        window.location.href = \"signup.html\"\n      }\n      accountName.value = response.data['name']\n    })\n    .catch(error => {\n      console.error('Error getting info :', error);\n    });\n}\n\nfunction uploadFile(){\n  const formData = new FormData()\n  formData.append('file', document.getElementById('file').files[0])\n  axios.post(\"http://localhost:7000/api/uploadFile\", \n            formData, \n            {headers: {\"Content-Type\" : 'multipart/form-data', \n                      'Authorization': `Bearer ${Cookies.get('session_cookie')}`} })\n  .then(response => {\n    alert(response.data)\n  })\n  .catch(error => {\n    console.error('Error getting info :', error);\n  });\n}\n\nfunction signOut(){\n  Cookies.remove('session_cookie')\n  window.location.href = \"login.html\"\n}\n\ngetAccountInfo()\n</script>\n\n<template>\n\n  <div class=\"background\"></div>\n\n  <div class=\"titleWrapper\">\n      \n      <h1 class=\"titleText\">\n          <a href=\"index.html\">ADR Prediction</a>\n      </h1>\n      \n      <label class=\"accountName\">{{accountName || \"No account\"}}</label>\n      <label @click=\"signOut\" class=\"uploadSignoutText\"><u>Sign out</u></label>\n      \n  </div>\n  \n  <div class=\"headingWrapper\">\n      <h2 class=\"heading\">\n        Upload your DNA file (.FastQ)\n      </h2>\n  </div>\n  \n  <div class=\"buttonWrapper\">\n\n    <div style=\"padding-bottom: 10%; font-size: 1.5em;\">Select <i>FastQ</i> file to upload:</div> \n    <input type=\"file\" name=\"file\" id=\"file\" class=\"inputfile\" accept=\".txt, .fq, .FastQ, .fastq\" @change=\"changeFileInfo\"/>\n    <label for=\"file\">Choose a file</label>\n    <div class=\"filenameDisplay\">File selected : {{fileName || \"None\"}}<br>Size : {{fileSize}}</div>\n    <div><button class=\"submitButton\" @click=\"uploadFile\">Submit</button></div>\n  </div>\n  \n  \n\n</template>\n\n<style>\n.uploadSignoutText{\n  position: absolute; \n  left: 90%; \n  font-size: 1.5em; \n  top: 37%; \n  color: white;\n  font-family: Arial, Helvetica, sans-serif;\n  background: ;\n}\n\na:link {\n  color: white;\n  text-decoration: none;\n}\n\na:visited {\n  color: white;\n  text-decoration: none;\n}\n\na:hover {\n  color: white;\n}\n\na:active {\n  color: white;\n  text-decoration: none;\n}\n\n.background{\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  padding: 100%;\n  background-color: #EBEBEB;\n}\n\n.titleWrapper{\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    background: #FF6700 ;\n    width: 100%;\n    padding-top: 1%;\n    padding-bottom: 1%;\n}\n\n.titleText{\n    display: inline;\n    padding-left: 1%;\n    color: white;\n    font-weight: 800;\n}\n\n.accountName {\n  position: inherit;\n  font-family: Arial, Helvetica, sans-serif;\n  color: white;\n  font-size: 1.5em;\n  top: 3%;\n  left: 80%;\n}\n\n.headingWrapper{\n    position: absolute;\n    top: 10%;\n    left: 50%;\n}\n\n.heading{\n    transform: translate(-50%);\n    font-size: xx-large;\n}\n\n.buttonWrapper{\n    position: absolute;\n    top: 20%;\n    left: 50%;\n    transform: translate(-50%);\n}\n\n.inputfile {\n\twidth: 0.1px;\n\theight: 0.1px;\n\topacity: 0;\n\toverflow: hidden;\n\tposition: absolute;\n\tz-index: -1;\n}\n\n.inputfile + label {\n    transform: translate(1%);\n    padding: 10%;\n    padding-left: 20%;\n    padding-right: 20%;\n    font-size: 1.7em;\n    font-weight: 700;\n    color: white;\n    background-color: #C0C0C0;\n    display: inline-block;\n    border-radius: 4px;\n    border-style: none;\n    text-align: center;\n}\n\n.inputfile:focus + label,\n\n.inputfile + label {\n\tcursor: pointer; /* \"hand\" cursor */\n}\n\n.submitButton {\n  position: absolute;\n  top: 156%;\n  left: 50%;\n  transform: translate(-50%);\n  outline: none;\n  cursor: pointer;\n  font-weight: 600;\n  border-radius: 3px;\n  padding: 12px 24px;\n  border: 0;\n  color: #3a4149;\n  background: #FF6700;\n  line-height: 1.15;\n  font-size: 1em;\n\n}\n\n.submitButton:hover {\n  transition: all .1s ease;\n  box-shadow: 0 0 0 0 #fff, 0 0 0 3px #1de9b6;\n}\n.filenameDisplay{\n    position: absolute;\n    left: 50%;\n    top: 115%;\n    transform: translate(-50%);\n    white-space: nowrap;\n}\n\n.uploadedFileViewer{\n    background-color: rgb(161, 61, 99);\n    color: #fff;\n    position: absolute;\n    padding: 2%;\n    border-radius: 4px;\n    border-style: none;\n    white-space: nowrap;\n    top: 15%;\n    left: 50%;\n    transform: translate(-50%);\n    font-size: 2em;\n}\n</style>"],"mappings":"AAEA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,QAAQ,QAAQ,KAAK;AAC9B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;;;;;;;;IAJ/B;IAMA,MAAMC,QAAQ,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAC1B,MAAMK,QAAQ,GAAGL,GAAG,CAAC,MAAM,CAAC;IAC5B,MAAMM,WAAW,GAAGN,GAAG,CAAC,YAAY,CAAC;IACrC,MAAMO,YAAY,GAAGP,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMQ,SAAS,GAAGR,GAAG,CAAC,IAAI,CAAC;IAE3B,SAASS,cAAcA,CAACC,KAAK,EAAC;MAC5BN,QAAQ,CAACO,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI;MAC3CT,QAAQ,CAACM,KAAK,GAAGI,cAAc,CAACL,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC;IAC7D;IAEA,MAAMD,cAAc,GAAIE,KAAK,IAAK;MAChC,MAAMC,KAAK,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;MAC/C,IAAIC,KAAK,GAAG,CAAC;MACb,OAAOF,KAAK,IAAI,IAAI,IAAIE,KAAK,GAAG,CAAC,EAAE;QACjCF,KAAK,IAAI,IAAI;QACbE,KAAK,EAAE;MACT;MACA,OAAQ,GAAEF,KAAK,CAACG,OAAO,CAAC,CAAC,CAAE,IAAGF,KAAK,CAACC,KAAK,CAAE,EAAC;IAC9C,CAAC;IAED,SAASE,cAAcA,CAAA,EAAE;MACvBnB,KAAK,CAACoB,IAAI,CAAC,0CAA0C,EAAC;QAACC,cAAc,EAAGpB,OAAO,CAACqB,GAAG,CAAC,gBAAgB;MAAC,CAAC,CAAC,CACpGC,IAAI,CAACC,QAAQ,IAAI;QAChB,IAAIA,QAAQ,CAACC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,EAAC;UACjCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,aAAa;QACtC;QACAxB,WAAW,CAACK,KAAK,GAAGe,QAAQ,CAACC,IAAI,CAAC,MAAM,CAAC;MAC3C,CAAC,CAAC,CACDI,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACN;IAEA,SAASE,UAAUA,CAAA,EAAE;MACnB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAAC1B,KAAK,CAAC,CAAC,CAAC,CAAC;MACjEX,KAAK,CAACoB,IAAI,CAAC,sCAAsC,EACvCa,QAAQ,EACR;QAACK,OAAO,EAAE;UAAC,cAAc,EAAG,qBAAqB;UACvC,eAAe,EAAG,UAASrC,OAAO,CAACqB,GAAG,CAAC,gBAAgB,CAAE;QAAC;MAAE,CAAC,CAAC,CACjFC,IAAI,CAACC,QAAQ,IAAI;QAChBe,KAAK,CAACf,QAAQ,CAACC,IAAI,CAAC;MACtB,CAAC,CAAC,CACDI,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACJ;IAEA,SAASU,OAAOA,CAAA,EAAE;MAChBvC,OAAO,CAACwC,MAAM,CAAC,gBAAgB,CAAC;MAChCf,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY;IACrC;IAEAT,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}